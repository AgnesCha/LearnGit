//TYPEKIT
function grayscale(e) {
    var t = document.createElement("canvas"),
        n = t.getContext("2d"),
        r = new Image;
    r.src = e;
    t.width = r.width;
    t.height = r.height;
    n.drawImage(r, 0, 0);
    var i = n.getImageData(0, 0, t.width, t.height);
    for (var s = 0; s < i.height; s++)
        for (var o = 0; o < i.width; o++) {
            var u = s * 4 * i.width + o * 4,
                a = (i.data[u] + i.data[u + 1] + i.data[u + 2]) / 3;
            i.data[u] = a;
            i.data[u + 1] = a;
            i.data[u + 2] = a
        }
    n.putImageData(i, 0, 0, 0, 0, i.width, i.height);
    return t.toDataURL()
}(function () {
    var e = {
        kitId: "bwt8zsf",
        scriptTimeout: 3e3
    }, t = document.getElementsByTagName("html")[0];
    t.className += " wf-loading";
    var n = setTimeout(function () {
        t.className = t.className.replace(/(\s|^)wf-loading(\s|$)/g, " ");
        t.className += " wf-inactive"
    }, e.scriptTimeout),
        r = document.createElement("script"),
        i = !1;
    r /*.src="//use.typekit.net/"+e.kitId+".js";r*/ .type = "text/javascript";
    r.async = "true";
    r.onload = r.onreadystatechange = function () {
        var t = this.readyState;
        if (i || t && t != "complete" && t != "loaded") return;
        i = !0;
        clearTimeout(n);
        try {
            Typekit.load(e)
        } catch (r) {}
    };
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(r, s)
})();
var _gaq = _gaq || [];
_gaq.push(["_setAccount", "UA-16357493-1"]);
_gaq.push(["_trackPageview"]);
(function () {
    var e = document.createElement("script");
    e.type = "text/javascript";
    e.async = !0;
    e.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
    var t = document.getElementsByTagName("script")[0];
    t.parentNode.insertBefore(e, t)
})();
(function () {
    var e = document.createElement("script");
    e.type = "text/javascript";
    e.async = !0;
    e.src = "https://apis.google.com/js/plusone.js";
    var t = document.getElementsByTagName("script")[0];
    t.parentNode.insertBefore(e, t)
})();
$(window).load(function () {
    var e = $(window).width(),
        t = $(".rslides img").height();
    "use strict";
    $("#loading").fadeOut(100);
    if ($(".work-page").is(":visible")) {
        $("#nav").remove();
        $("#footer").remove()
    }
    e < 767 || $.stellar();
    e > 768 ? $(".home-slider").css({
        "min-height": t - 210
    }) : $(".home-slider").css({
        "min-height": t
    });
    $(".clients img").fadeIn(500);
    $(".clients img").each(function () {
        var e = $(this);
        e.css({
            position: "absolute",
            left: "0px"
        }).wrap("<div class='img_wrapper' style='display: inline-block;'>").clone().addClass("img_grayscale").css({
            position: "absolute",
            "z-index": "998",
            opacity: "0",
            left: "0px"
        }).insertBefore(e).queue(function () {
            var e = $(this);
            e.parent().css({
                width: this.width,
                height: this.height
            });
            e.dequeue()
        });
        this.src = grayscale(this.src)
    });
    $(".clients img").mouseover(function () {
        $(this).parent().find("img:first").stop().animate({
            opacity: 1
        }, 1e3)
    });
    $(".img_grayscale").mouseout(function () {
        $(this).stop().animate({
            opacity: 0
        }, 1e3)
    })
});
$(window).resize(function () {
    var e = $(".box-contents .hobbies li"),
        t = e.width(),
        n = $(window).width(),
        r = $(".rslides img").height();
    e.css("height", t + 40);
    n > 768 ? $(".home-slider").css({
        "min-height": r - 210
    }) : $(".home-slider").css({
        "min-height": r
    })
});
$(document).ready(function () {
    "use strict";
    $(".kv-prev-next .next, .kv-prev-next .prev").hide();
    $(function () {
        $(window).scroll(function () {
            $(this).scrollTop() > 150 ? $(".kv-prev-next .next, .kv-prev-next .prev").stop().fadeTo("fast", 1) : $(".kv-prev-next .next, .kv-prev-next .prev").stop().fadeTo("10", 0)
        })
    });
    $(".kv-prev-next .next").on({
        mouseenter: function () {
            $(this).animate({
                right: "10"
            }, 100)
        },
        mouseleave: function () {
            $(this).animate({
                right: "15"
            }, 100)
        }
    });
    $(".kv-prev-next .prev").on({
        mouseenter: function () {
            $(this).animate({
                left: "10"
            }, 100)
        },
        mouseleave: function () {
            $(this).animate({
                left: "15"
            }, 100)
        }
    });
    $(".dropdown li").click(function () {
        var e = window.location.pathname.substring(1),
            t = $(this).html();
        t == "中文" ? location.href = "http://ch.ten2.tw/" + e : t == "EN" && (location.href = "http://ten2.tw/" + e)
    });
    $(".dropdown").change(function () {
        var e = "",
            t = window.location.pathname.substring(1);
        $(".dropdown option:selected").each(function () {
            e = $(this).html()
        });
        e == "中文" ? location.href = "http://ch.ten2.tw/" + t : e == "EN" && (location.href = "http://ten2.tw/" + t)
    });
    $(".rslides").responsiveSlides();
    $("#layerslider").layerSlider({
        skin: "noskin",
        skinsPath: "assets/templates/ten2/css/",
        navStartStop: !1
    });
    $("#menu li .dropdown li:last").css({
        "border-bottom": "none"
    });
    $(".link-bar .row div").removeClass("current-page");
    var e = location.pathname.split("/");
    if (e.length > 1 && e[1].indexOf("services") > -1) {
        $(".link-bar .row div.text-center:eq(0)").addClass("current-page");
        $("#menu ul li:eq(1)").addClass("active")
    } else if (e.length > 1 && e[1].indexOf("development") > -1) {
        $(".link-bar .row div.text-center:eq(1)").addClass("current-page");
        $("#menu ul li:eq(2)").addClass("active")
    } else if (e.length > 1 && e[1].indexOf("projects") > -1) {
        $(".link-bar .row div.text-center:eq(2)").addClass("current-page");
        $("#menu ul li:eq(3)").addClass("active")
    } else if (e.length > 1 && e[1].indexOf("about") > -1) {
        $(".link-bar .row div.text-center:eq(3)").addClass("current-page");
        $("#menu ul li:eq(4)").addClass("active")
    } else if (e.length > 1 && e[1].indexOf("contact") > -1) {
        $(".link-bar .row div.text-center:eq(4)").addClass("current-page");
        $("#menu ul li:eq(5)").addClass("active")
    }
    $(".box-contents li").on({
        mouseenter: function () {
            $(this).find(".mask").fadeIn()
        },
        mouseleave: function () {
            $(this).find(".mask").fadeOut()
        }
    });
    $(".work-environment").on({
        mouseenter: function () {
            $(".work-environment .mask").fadeIn()
        },
        mouseleave: function () {
            $(".work-environment .mask").fadeOut()
        }
    });
    var t = $(".box-contents .hobbies li"),
        n = t.width();
    t.css("height", n + 40);
    $("#mobile-toggle").click(function () {
        $("#nav").hasClass("mobile-menu-open") ? $("#nav").removeClass("mobile-menu-open") : $("#nav").addClass("mobile-menu-open")
    });
    var r = !1,
        i = navigator.platform;
    if (i === "iPad" || i === "iPhone" || i === "iPod") r = !0;
    r === !1 ? $(window).on("scroll", function () {
        var e = $(this).scrollTop();
        if (e > 1) {
            $("#nav").addClass("nav-bg");
            $("#logo").removeClass("animated pulse")
        }
        if (e === 0) {
            $("#nav").removeClass("nav-bg");
            $("#logo").addClass("animated pulse")
        }
    }) : $("#nav").addClass("nav-bg");
    $("#contact-page").is(":visible") && $("#nav").addClass("nav-bg");
    if (r === !1) {
        $(".flyIn").bind("inview", function (e, t) {
            t === !0 && $(this).addClass("animated fadeInUpBig")
        });
        $(".flyInFast").bind("inview", function (e, t) {
            t === !0 && $(this).addClass("animated fadeInUp")
        });
        $(".flyRight").bind("inview", function (e, t) {
            t === !0 && $(this).addClass("animated fadeInRightBig")
        });
        $(".flyLeft").bind("inview", function (e, t) {
            t === !0 && $(this).addClass("animated fadeInLeftBig")
        });
        $(".rotate").bind("inview", function (e, t) {
            t === !0 && $(this).addClass("animated rotatetIn")
        })
    }
    $(".process").mouseenter(function () {
        $(this).children("i").addClass("animated pulse")
    }).mouseleave(function () {
        $(this).children("i").removeClass("animated pulse")
    });
    $(".stat-box").mouseenter(function () {
        $(this).addClass("animated bounce")
    }).mouseleave(function () {
        $(this).removeClass("animated bounce")
    });
    $(".expand-work a").mouseenter(function () {
        $(this).children("i").addClass("animated pulse")
    }).mouseleave(function () {
        $(this).children("i").removeClass("animated pulse")
    });
    $(".team-image-wrap").mouseenter(function () {
        $(this).children(".social-overlay").fadeIn(200)
    }).mouseleave(function () {
        $(this).children(".social-overlay").fadeOut(200)
    });
    $(".a-service").click(function () {
        if ($(this).hasClass("service-height")) {
            $(this).removeClass("service-height");
            $(this).css("background-color", "");
            $(this).children("h3").css("color", "");
            $(this).children(".p-holder").fadeOut(500)
        } else {
            $(this).addClass("service-height");
            $(this).css("background-color", "#fff");
            $(this).children("h3").css("color", "#57b567");
            $(this).children(".p-holder").fadeIn(1e3)
        }
    });
    $(function () {
        $(".form-button").click(function (e) {
            var t = 0,
                n = $("#form-name").val(),
                r = $("#form-email").val(),
                i = $("#form-msg").val(),
                s = $("#form-security").val();
            if (n === "" || r === "" || i === "") {
                $("#details-error-wrap").fadeIn(1e3);
                t = 1
            } else $("#details-error-wrap").fadeOut(1e3); if (s !== "8") {
                $("#security-error-wrap").fadeIn(1e3);
                t = 1
            } else $("#security-error-wrap").fadeOut(1e3); if (!/(.+)@(.+){2,}\.(.+){2,}/.test(r)) {
                $("#details-error-wrap").fadeIn(1e3);
                t = 1
            }
            var o = "name=" + n + "&email=" + r + "&text=" + i;
            if (t === 0) {
                $.ajax({
                    type: "POST",
                    url: "mail.php",
                    data: o,
                    success: function () {
                        $("#details-error-wrap").fadeOut(300);
                        $("#security-error-wrap").fadeOut(300);
                        $("#form-sent").fadeIn(1e3);
                        setTimeout(function () {
                            $("#form-holder").addClass("animated bounceOutRight")
                        }, 1500);
                        setTimeout(function () {
                            $("#thankyou-message").fadeIn(1e3)
                        }, 1800)
                    }
                });
                return !1
            }
            e.preventDefault()
        })
    })
});